# Библиотка экосистемы проекта Илма
## Библиотека включает в себя следующие сервисы:
- HttpService - обертка над Guzzle для более одобного использования
- JwtService - обработчик уведомлений об изменении статуса JWT.
  Боль: Имеется сервис авторизации на котором генерируется и отзывается JWT. Необходимо уведомить все дочерние сервисы об отзыве JWT.
  Реализация: Проблема решена через RabbitMQ транспорт, где сервис авторизации создает задачу в очереди, которую читает сервис - подписчик. Получается что с помощью механизма Laravel Jobs мы обеспечиваем создание задачи в одном сервисе, а выполнение в другом.
- UserService - обработчик уведомлений об изменении данных пользователя.
  Боль: Имеется сервис пользователе на котором централизованно хранятся и изменяются учетные записи. Необходимо уведомить все дочернии сервисы о создании и измнеении пользователя.
  Реализация: Проблема решена аналогично JwtService
- SubscribeService - Механизм подписки на обновления. Реализовано через POST запрос к сервису авторизации через HttpService
## Переназначения
Все сервисы подключены через привязки интерфейсов к реализациям через сервис провайдеры.
Это прозволяется переназначить реализацию, вызываемую через метод app()->make().

Раздел в документации: https://laravel.com/docs/7.x/container#binding-interfaces-to-implementations

Пример:
У нас есть 
- UserService/Service - реализация сервиса UserService
- UserService/ServiceInterface - интерфейс сервиса
- UserService/Provider - Сервис провайдер сервиса

Если вы посмотрите в Provider, то увидите механизм привязки интерфейса к реализации

``$this->app->bind(ServiceInterface::class,Service::class);``

При вызове `app()->make(ServiceInterface::class)` laravel создаст инстанс `Service::class`. 

Для того, чтобы привязать другую реализацию, нам необходимо в `app/Providers/AppServiceProvider.php` прописать привязку по аналогии с выше сказанной, но в качестве второго аргумента указать уже свой класс.
